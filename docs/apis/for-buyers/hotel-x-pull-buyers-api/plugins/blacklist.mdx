---
sidebar_position: 2
---

# Blacklist

Blacklist plugin allows you to ignore specific hotel codes during search execution by discarding blacklisted options based on uploaded files. This implies that none of the hotels on the blacklist will be requested from the supplier. With the ability to exclude entire suppliers using customizable rules, you can streamline results and enhance query efficiency. 

In order for the blacklist plugin to work, you need to have the blacklist file in the FTP + add the plugin to the request.

### Create Blacklist file

```mdx-code-block
<BrowserWindow>

📁F0\_0000  
&nbsp;&nbsp;&nbsp;&nbsp; 📁HotelX_0000  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 📁BusinessRules  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 📄blacklist_access_hotels.csv

</BrowserWindow>
```

Download the file, include your data following the example (delete the first line), save it in csv format, and upload it to your FTP following the example.


:::caution

Bear in mind that this file is a collection of rules and we chose in every Search **the first rule that matches the criteria sent in the Query**. You should specify the more restrictive rules on the top of the file. If there is no value for any rule criteria row, it means that any value in the request matches this row. It is important to indicate the contexts used in values on the rule criteria to improve rule matching.

:::

<details>
    <summary>Learn how to change the format of the csv file in order to edit and save it</summary>
    <div>
        <div>[Añadir vídeo]</div>
    </div>
</details>

<details>
    <summary>Check the definitions and file format if you have any doubts about the example</summary>
    <div>
        <div>
		File Name: blacklist_access_hotels.csv
		Directory: F[folder code][unique code]/HotelX[unique code]/BusinessRules
		Delimiter: Comma (“,”)
		Header Row:
		   * IdRule: Unique identifier of the rule (assign one)
		   * ClientToken: List of clienttoken separated by ‘;’ 
		   * NoClientToken: List of clienttoken separated by ‘;’ 
		   * Client: List of client codes separated by ‘;’
		   * NoClient: List of client codes separated by ‘;’
		   * Supplier: List of supplier codes separated by ‘;’
		   * NoSupplier: List of supplier codes separated by ‘;’
		   * Access: List of access codes separated by ‘;’
		   * NoAccess: List of access codes separated by ‘;’
		   * Context: List of operation (client?) context codes separated by ‘;’
		   * NoContext: List of operation (client?) context codes separated by ‘;’
		   * ContextSup: List of supplier context codes separated by ‘;’
		   * NoContextSup: List of supplier context codes separated by ‘;’
		   * Values: Values can be blacklist or whitelist with Hotel codes grouped by context:
		       Format:
			     * All values should have two blocks separated by the characters ‘||’
				 * The first block identifies the context and the second block identifies the list of hotel codes separated by ‘;’
				 * Values in the whitelist or blacklist are separated by the characters ‘|@|’ 
				 * Use all keyword when you want choose all context or all hotels
			   Format examples:
				 * Blacklist: bk:(CTX1||A;B;C@|CTX2||C;B;D;)
				 * Whitelist: wl:(CTX1||A;B;C@|CTX2||all)
				 * Blacklist and Whitelist (if bk and wl are used at same time, then the CONTEXT must be exclusive): bk:(CTX1||A;B;C), wl:(CTX2||A;B;C)
		</div>
    </div>
</details>

<details>
    <summary>Check some of the most common use cases</summary>
    <div>
        <div>
		Block all hotels of two accesses [Añadir csv]
		Block all hotels of two suppliers [Añadir csv]
		Block all hotels except “A” and “B” of two suppliers [Añadir csv]
		Block a hotel code using the supplier codes [Añadir csv]
		Block all hotel codes from any supplier except some specified [Añadir csv]
		</div>
    </div>
</details>

### Execute Blacklist plugin

In order to use the plugin, you should add it in the Settings node of the request.

```json
"settings": {
	"plugins": [
		{
			"step": "REQUEST_ACCESS",
			"pluginsType": {
				"name": "blacklist",
				"type": "PRE_STEP"
			}
		}
	]
}
```

To apply specific rule, you should add `clientTokens` in the request.


	"settings": {
		"context": null,
		"client": "xtg",
		"auditTransactions": true,
		"testMode": true,
		"clientTokens": [
			"testToken"
		],
		"plugins": [
            {
				"step": "REQUEST_ACCESS",
				"pluginsType": {
					"name": "blacklist",
					"type": "PRE_STEP"
				}
			}
        ]
	}