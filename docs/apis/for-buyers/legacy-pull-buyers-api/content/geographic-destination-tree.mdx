---
sidebar_position: 5
---

# Geographic Destination Tree

The Geographic Destination Tree method returns a comprehensive destination list from a supplier's access, granting you access to all the destinations configured by the Seller for a given set of credentials. The returned fields include

* `code`
* `name`


## Request

:::caution

The maximum time permitted in our system before the connection is closed is 240000 milliseconds.

:::

```html
<soapenv:Envelope xmlns:soapenv = "http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns = "http://schemas.xmltravelgate.com/hub/2012/06" xmlns:wsse = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <soapenv:Header>
        <wsse:Security>
            <wsse:UsernameToken>
                <wsse:Username>username</wsse:Username>
                <wsse:Password>password</wsse:Password>
            </wsse:UsernameToken>
        </wsse:Security>
    </soapenv:Header>
    <soapenv:Body>
        <ns:GeographicDestinationTree>
            <ns:geographicDestinationTreeRQ>
                <ns:timeoutMilliseconds>180000</ns:timeoutMilliseconds>
                <ns:version>1</ns:version>
                <ns:providerRQ>
                    <ns:code>code</ns:code>
                    <ns:id>1</ns:id>
                    <ns:rqXML>
                        <GeographicDestinationTreeRQ xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd = "http://www.w3.org/2001/XMLSchema">
                            <timeoutMilliseconds>20000</timeoutMilliseconds>
                            <source>
                                <languageCode>en</languageCode>
                            </source>
                            <filterAuditData>
                                <registerTransactions>false</registerTransactions>
                            </filterAuditData>
                            <Configuration>
                                <User>user</User>
                                <Password>password</Password>
                                <UrlGeneric>www.supplier.com</UrlGeneric>
                                <Parameters>
                                    <Parameter key = "SegundoPW" value = "PWXML"></Parameter>
                                </Parameters>
                            </Configuration>
                        </GeographicDestinationTreeRQ>
                    </ns:rqXML>
                </ns:providerRQ>
            </ns:geographicDestinationTreeRQ>
        </ns:GeographicDestinationTree>
    </soapenv:Body>
</soapenv:Envelope>
```

### Request Data Breakdown

| Element                                    | Rel  | Type    | Description                                                                 |
|--------------------------------------------|------|---------|-----------------------------------------------------------------------------|
| RuntimeConfigurationRQ                     | 1    |         |                                                                             |
| RuntimeConfigurationRQ/timeoutMilliseconds | 1    | Integer | Maximum time for a response from the supplier’s system.                     |
| RuntimeCOnfigurationRQ/source              | 1    |         |                                                                             |
| source/languageCode                        | 1    | String  | Language code (ISO 3166-1 alpha-2) format lowercase.                        |
| RuntimeConfigurationRQ/filterAuditData     | 1    |         | Activates transaction data sent & received in the supplier’s native format. |
| filterAuditData/registerTransactions       | 1    | Boolean | Returns all the transactions (XMLs) exchanged with the supplier.            |
| RuntimeConfigurationRQ/Configuration       | 1    |         | The info required to access the supplier’s system.                          |
| Configuration/User                         | 0..1 | String  | User code to connect to supplier.                                           |
| Configuration/Password                     | 0..1 | String  | Password for the connection.                                                |
| Configuration/UrlGeneric                   | 0..1 | String  | Supplier URL used for multiple methods.                                     |
| Configuration/Parameters                   | 0..1 |         | Parameters for additional information.                                      |
| Parameters/Parameter                       | 0..n |         |                                                                             |
| @key                                       | 1    | String  | Contains the keyword/Id to identify a parameter.                            |
| @value                                     | 1    | String  | Contains the parameter values.                                              |


## Response

```html
<GeographicDestinationTreeRS>
    <UpgradeUTCDate>2016-10-18T13:18:03+02:00</UpgradeUTCDate>
    <DestinationTree code = "ES" name = "España" avail = "False">
        <DestinationLeaf code = "BAL"/>
        <DestinationLeaf code = "AST"/>
        <DestinationLeaf code = "AND"/>
    </DestinationTree>
    <DestinationTree code= "IT" name = "Italia" avail = "False">
        <DestinationLeaf code = "AA"/>
        <DestinationLeaf code = "BB"/>
    </DestinationTree>
    <DestinationTree code = "EN" name = "England" avail = "False">
    </DestinationTree>
    <DestinationTree code = "BAL" name = "Baleares" avail = "True">
        <DestinationLeaf code = "PAL0"/>
        <DestinationLeaf code = "ALC0"/>
    </DestinationTree>
    <DestinationTree code = "AST" name = "Asturias" avail = "True"/>
    <DestinationTree code = "AND" name = "Andalucia" avail = "True"/>
    <DestinationTree code = "PAL0" name = "Palma de Mallorca" avail = " True"/>
    <DestinationTree code = "ALC0" name = "Alcudia" avail = " True"/>
</GeographicDestinationTreeRS>
```

### Response Data Breakdown

| Element                                     | Rel  | Type     | Description                                                 |
|---------------------------------------------|------|----------|-------------------------------------------------------------|
| GeographicDestinationTreeRS/UpgradeUTCDate  | 1    | DateTime | Indicates the update date of the information in UTC format. |
| GeographicDestinationTreeRS/DestinationTree | 1..n |          | Father node                                                 |
| @code                                       | 1    | String   | Destination code                                            |
| @name                                       | 1    | String   | Destination name                                            |
| @avail                                      | 1    | Boolean  | Destination available                                       |
| DestinationTree/DestinationLeaf             | 0..n |          | Childs node                                                 |
| @code                                       | 1    | String   | Sub-destination code                                        |

### Geographic Destination Tree Logic

Once you run a Geograpich Destination Tree Request, you will receive the Seller's native geographic destination codes in the response. These codes can be classified into 2 categories:

1. Zone (DestinationTree code)
2. City (DentinationLeaf code)

Sellers build their own Geographic Destination Tree based on both nodes. Consequently, when you request their geographic destination list, you will receive a structured categorized response that can help you with the mapping process.

:::note

A parent can have zero to n children ( 0..n ) and a child can only one parent ( 1..1 ). 

For example, the DestinationTree code = “ES” is the parent of the DestinationLeaf code = “BAL”, “AST” and “AND” and at the same time DestinationTree code = “BAL” is also a the parent of the DestinationLeaf code = “PAL0” and “ALC0”, and so on.

:::