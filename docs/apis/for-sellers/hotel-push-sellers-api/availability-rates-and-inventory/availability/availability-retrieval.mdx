---
sidebar_position: 2
---

# Availability Retrieval

The `HotelAvailRetrieve` request message is sent to retrieve a complete breakdown of availability, including details about the Hotels, Rate Plans, and Rooms.

## Request

[Añadir ejemplo]

### Request Data Breakdown

| Element                              | Rel  | Type   | Description                                                                                                                                        |
|--------------------------------------|------|--------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| HotelAvailRetrieve                   | 1    |        |                                                                                                                                                    |
| ../request                           | 1    |        |                                                                                                                                                    |
| ../POS                               | 0..1 |        |                                                                                                                                                    |
| ../Source                            | 0..1 |        |                                                                                                                                                    |
| Source/RequestorID                   | ?    |        |                                                                                                                                                    |
| @ID                                  | ?    | String | ???Provider ID                                                                                                                                     |
| Source/BookingChannel                | ?    |        |                                                                                                                                                    |
| ../CompanyName                       | ?    |        |                                                                                                                                                    |
| @Code                                | ?    | String | ???Client ID                                                                                                                                       |
| Source/TPA_Extensions                | 0..1 |        | Optional, if empty only active RatePlans/Rooms will be received                                                                                          |
| ../Params                            | 0..1 |        |                                                                                                                                                    |
| ../Param                             | 0..N |        |                                                                                                                                                    |
| @key                                 | 1    | String | `onlyActive`                                                                                                                                         |
| @value                               | 1    | String | 1 - You will receive all active RatePlans/Rooms data. 0 - Active and deactivated RatePlans/Rooms will be received. (Same case as without TPA_Extensions node.) |
| HotelAvailRequests                   |      |        |                                                                                                                                                    |
| ../HotelAvailRequest                 |      |        |                                                                                                                                                    |
| HotelAvailRequest/DateRange          |      |        |                                                                                                                                                    |
| @Start                               | 1    | Date   | Start date to search rates.                                                                                                                        |
| @End                                 | 1    | Date   | End date to search rates.                                                                                                                          |
| HotelAvailRequest/HotelRef           | 1    |        |                                                                                                                              |
| @HotelCode                           | 1    | String | Hotel date to search rates.                                                                                                                        |
| HotelAvailRequest/RatePlanCandidates | 0..1 |        | If exists, contains rate filter.                                                                                                                   |
| RatePlanCandidates/RatePlanCandidate | 1..n |        |                                                                                                                                                    |
| @RatePlanCode                        | 1    | String | Rate Plan Code to search rates.                                                                                                                  |

## Response

After each request, Travelgate will process the data and provide you with a response. Upon receiving a `HotelRatePlanRetrieve` request, Travelgate will send you a corresponding `HotelRatePlanRetrieve` response. 

The response options include either **success** or an **error**. In the event of success, Travelgate will provide you a response in which retrieves a breakdown of availability, including details about the Hotel, Rate Plans, and Rooms.

### Success

[Añadir ejemplo]

#### Sucess Response Data Breakdown

| Element                                     | Rel  | Type    | Description                                                                                                                                                                                                                            |
|---------------------------------------------|------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| HotelAvailRetrieveResponse                  | 1    |         |                                                                                                                                                                                                                                        |
| ../HotelAvailRetrieveResult                 | 1    |         |                                                                                                                                                                                                                                        |
| HotelAvailRetrieveResult/Success            | 1    |         |                                                                                                                                                                                                                                        |
| HotelAvailRetrieveResult/AvailStatusMessages                 | 1    |         |                                                                                                                                                                                                                                        |
| @HotelCode                                  | 1    | String  | Hotel code                                                                                                                                                                                                                             |
| ../AvailStatusMessage                       | 1..n |         |                                                                                                                                                                                                                                        |
| @BookingLimit                               | 0..1 | Integer | The number of rooms available per Room-RatePlan for the specified dates. This field is exclusively used for Derivated Rates.                                                                                                                                     |
| @BookingSold                                | 0..1 | Integer | The number of rooms booked per Room-RatePlan for the specified dates. The available allotment is calculated as the difference between @BookingLimit and @BookingSold. This field is exclusively used for Derivated Rates                                                        |
| AvailStatusMessage/StatusApplicationControl | 1    |         |                                                                                                                                                                                                                                        |
| @Start                                      | 1    | Date    | Start date                                                                                                                                                                                                                             |
| @End                                        | 1    | Date    | End date                                                                                                                                                                                                                               |
| @RatePlanCode                               | 1    | String  |                                                                                                                                                                                                                                        |
| @InvCode                                    | 0..1 | String  | Room code. This field is exclusively used for Basic Rates.                                                                                                                                                                                                  |
| @InvType                                    | 0..1 | String  | `ROOM`. This field is exclusively used for Basic Rates.                                                                                                                                                                                                  |
| @PromotionCode                              | 0..1 | String  | `OfferCode`. This field is exclusively used for Offers.                                                                                                                                                                                                |
| @Mon                                        | 0..1 | Boolean | If true or attribute is not present, there is availability on Monday.                                                                                                                                                                   |
| @Tue                                        | 0..1 | Boolean | If true or attribute is not present, there is availability on Tuesday.                                                                                                                                                                  |
| @Weds                                       | 0..1 | Boolean | If true or attribute is not present, there is availability on Wednesday.                                                                                                                                                                |
| @Thur                                       | 0..1 | Boolean | If true or attribute is not present, there is availability on Thurday.                                                                                                                                                                  |
| @Fri                                        | 0..1 | Boolean | If true or attribute is not present, there is availability on Friday.                                                                                                                                                                   |
| @Sat                                        | 0..1 | Boolean | If true or attribute is not present, there is availability on Saturday.                                                                                                                                                                 |
| @Sat                                        | 0..1 | Boolean | If true or attribute is not present, there is availability on Sunday.                                                                                                                                                                   |
| AvailStatusMessage/LengthsOfStay            | 0..1 |         |                                                                                                                                                                                                                                        |
| @ArrivalDateBased                           | 0..1 | Boolean | If true, the Minimum and Maximum Stay is checked ONLY the first day of the availability. If false or null, the Minimum and Maximum Stay is checked all the availability days. If both values are needed, two @AvailStatusMessage will be sent. |
| ../LengthOfStay                             | 1..2 |         |                                                                                                                                                                                                                                        |
| @Time                                       | 1    | Integer | Indicates the number of @TimeUnit for this stay. When value is 0 or -1, condition should be deleted from the system.                                                                                                                    |
| @TimeUnit                                   | 1    | String  | `Day`                                                                                                                                                                                                                             |
| @MinMaxMessageType                          | 1    | String  | `MinLOS` (minimum) or `MaxLOS` (maximum) @LenghtOfSaty.                                                                                                                                                                                      |
| AvailStatusMessage/RestrictionStatus        | 0..1 |         |                                                                                                                                                                                                                                        |
| @Status                                     | 0..1 | String  | `Open` or `Close`                                                                                                                                                                                                                          |
| @Restriction                                | 0..1 | String  | `Master`, `Arrival` or `Departure`                                                                                                                                                                                                           |
| @MinAdvancedBookingOffset                   | 0..1 | Integer | Minimum number of days before the check-in date to be available to be booked. This restriction is usually used to offer discounts on early bookings. When value is 0 or -1, condition should be deleted from the system.                |
| @MaxAdvancedBookingOffset                   | 0..1 | Integer | Maximum number of days before the check-in date to be available to be booked. This restriction is usually used to offer last minute discounts on unsold inventory. When value is -1, condition should be deleted from the system.       |
| @SellThroughOpenIndicator                   | 0..1 | Boolean | Room-RatePlan can be sold with no limit if @Status is 'Open'. This field is exclusively used for Basic Rates.                                                                                                                                                                         |


### Error

```html
<HotelAvailRetrieveResponse xmlns="http://schemas.xmltravelgate.com/hubpush/provider/2012/10">
    <HotelAvailRetrieveResult>
        <Errors xmlns="http://www.opentravel.org/OTA/2003/05">
            <Error ShortText="Incomplete AdditionalGuestAmount values" Code="7"/>
        </Errors>
    </HotelAvailRetrieveResult>
</HotelAvailRetrieveResponse>
```

<details>
    <summary>Error codes you could receive in the response while setting up and loading the product</summary>
    <div>
        <div>
         <table>
				<thead>
					<tr>
						<th>
							<strong>Error Code</strong>
						</th>
						<th>
							<strong>Error Description</strong>
						</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>-1</td>
						<td>Unexpected error</td>
					</tr>
					<tr>
						<td>1</td>
						<td>Invalid request</td>
					</tr>
					<tr>
						<td>10</td>
						<td>Invalid hotel id</td>
					</tr>
                    <tr>
						<td>11</td>
						<td>Invalid dates</td>
					</tr>
					<tr>
						<td>12</td>
						<td>Invalid rate plan code</td>
					</tr>
					<tr>
						<td>13</td>
						<td>Invalid reservation id</td>
					</tr>
                    <tr>
						<td>14</td>
						<td>Invalid derived rate adjust values</td>
					</tr>
					<tr>
						<td>15</td>
						<td>Invalid id</td>
					</tr>
					<tr>
						<td>16</td>
						<td>Invalid amount type</td>
					</tr>
                    <tr>
						<td>17</td>
						<td>Invalid supplement type</td>
					</tr>
                    <tr>
						<td>18</td>
						<td>Invalid number of hotel</td>
					</tr>
                    <tr>
						<td>19</td>
						<td>Invalid rate currency code</td>
					</tr>
                    <tr>
						<td>20</td>
						<td>Requestor id not found</td>
					</tr>
                    <tr>
						<td>21</td>
						<td>Provider id not found</td>
					</tr>
                    <tr>
						<td>22</td>
						<td>Rooms not found</td>
					</tr>
                    <tr>
						<td>23</td>
						<td>Rates not found</td>
					</tr>
                    <tr>
						<td>30</td>
						<td>Occupation error</td>
					</tr>
                    <tr>
						<td>31</td>
						<td>Rate error</td>
					</tr>
                    <tr>
						<td>32</td>
						<td>Avail rq error</td>
					</tr>
                    <tr>
						<td>33</td>
						<td>Data Base error</td>
					</tr>
                    <tr>
						<td>34</td>
						<td>Cancel error</td>
					</tr>
                    <tr>
						<td>35</td>
						<td>Confirmation error</td>
					</tr>
                    <tr>
						<td>36</td>
						<td>Valuation_error</td>
					</tr>
                    <tr>
						<td>37</td>
						<td>Authorization error</td>
					</tr>
                    <tr>
						<td>38</td>
						<td>Authentication error</td>
					</tr>
                    <tr>
						<td>90</td>
						<td>Connection time out</td>
					</tr>
				</tbody>
			</table>
        </div>
    </div>
</details>
