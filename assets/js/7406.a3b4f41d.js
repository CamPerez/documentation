"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["7406"],{94248:function(e,t,r){r.r(t),r.d(t,{setupMode:()=>p});var i=r(45450),o=r(36348);class s{_defaults;_idleCheckInterval;_lastUsedTime=0;_configChangeListener;_worker=null;_client=null;constructor(e){this._defaults=e,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),3e4),this._configChangeListener=this._defaults.onDidChange(()=>{this._stopWorker()})}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){this._worker&&Date.now()-this._lastUsedTime>12e4&&this._stopWorker()}async _getClient(){if(this._lastUsedTime=Date.now(),!this._client&&!this._worker)try{let{languageId:e,formattingOptions:t,schemas:r,externalFragmentDefinitions:s,completionSettings:n}=this._defaults;this._worker=i.editor.createWebWorker({moduleId:"monaco-graphql/esm/GraphQLWorker.js",label:e,createData:{languageId:e,formattingOptions:t,languageConfig:{schemas:r?.map(o.ZT),externalFragmentDefinitions:s,fillLeafsOnComplete:n.__experimental__fillLeafsOnComplete}}}),this._client=this._worker.getProxy()}catch(e){console.error("error loading worker",e)}return this._client}async getLanguageServiceWorker(...e){let t=await this._getClient();return await this._worker.withSyncedResources(e),t}}var n=r(95682),a=r(18770);class l{defaults;_worker;_disposables=[];_listener=Object.create(null);constructor(e,t){let r;this.defaults=e,this._worker=t,this._worker=t;let i=t=>{let i=(0,o.VQ)(t);if(i!==this.defaults.languageId)return;let s=t.uri.toString(),n=e.diagnosticSettings.validateVariablesJSON?.[s];r=setTimeout(()=>{this._doValidate(t.uri,i,n)},400),this._listener[s]=t.onDidChangeContent(()=>{clearTimeout(r),r=setTimeout(()=>{this._doValidate(t.uri,i,n)},400)})},s=e=>{n.editor.setModelMarkers(e,this.defaults.languageId,[]);let t=e.uri.toString(),r=this._listener[t];r&&(r.dispose(),delete this._listener[t])};for(let t of(this._disposables.push(n.editor.onDidCreateModel(i),{dispose(){clearTimeout(r)}},n.editor.onWillDisposeModel(e=>{s(e)}),n.editor.onDidChangeModelLanguage(e=>{s(e.model),i(e.model)}),{dispose:()=>{for(let e of Object.values(this._listener))e.dispose()}},e.onDidChange(()=>{for(let e of n.editor.getModels())(0,o.VQ)(e)===this.defaults.languageId&&(s(e),i(e))})),n.editor.getModels()))(0,o.VQ)(t)===this.defaults.languageId&&i(t)}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}async _doValidate(e,t,o){let s=await this._worker(e);if(!s)return;let a=await s.doValidation(e.toString());if(n.editor.setModelMarkers(n.editor.getModel(e),t,a),o){if(await Promise.resolve().then(r.bind(r,72323)),!o.length)throw Error("No variables URI strings provided to validate");let t=await s.doGetVariablesJSONSchema(e.toString());if(!t)return;let n=i.Uri.file(o[0].replace(".json","-schema.json")).toString(),a=i.languages.json.jsonDefaults.diagnosticsOptions.schemas?.filter(e=>e.uri!==n)||[];i.languages.json.jsonDefaults.setDiagnosticsOptions({schemaValidation:"error",validate:!0,...this.defaults.diagnosticSettings.jsonDiagnosticSettings,schemas:[...a,{uri:n,schema:t,fileMatch:o}],enableSchemaRequest:!1})}}}let c=i.languages.CompletionItemKind,d={[a.cm.Text]:c.Text,[a.cm.Method]:c.Method,[a.cm.Function]:c.Function,[a.cm.Constructor]:c.Constructor,[a.cm.Field]:c.Field,[a.cm.Variable]:c.Variable,[a.cm.Class]:c.Class,[a.cm.Interface]:c.Interface,[a.cm.Module]:c.Module,[a.cm.Property]:c.Property,[a.cm.Unit]:c.Unit,[a.cm.Value]:c.Value,[a.cm.Enum]:c.Enum,[a.cm.Keyword]:c.Keyword,[a.cm.Snippet]:c.Snippet,[a.cm.Color]:c.Color,[a.cm.File]:c.File,[a.cm.Reference]:c.Reference,[a.cm.Folder]:c.Folder,[a.cm.EnumMember]:c.EnumMember,[a.cm.Constant]:c.Constant,[a.cm.Struct]:c.Struct,[a.cm.Event]:c.Event,[a.cm.Operator]:c.Operator,[a.cm.TypeParameter]:c.TypeParameter};function u(e){var t;return{range:e.range,kind:(t=e.kind)in d?d[t]:c.Text,label:e.label,insertText:e.insertText??e.label,insertTextRules:e.insertText?i.languages.CompletionItemInsertTextRule.InsertAsSnippet:void 0,sortText:e.sortText,filterText:e.filterText,documentation:e.documentation,detail:e.detail,command:e.command}}class g{_worker;constructor(e){this._worker=e,this._worker=e}get triggerCharacters(){return[":","$"," ","(","@"]}async provideCompletionItems(e,t,r,i){try{let r=await this._worker(e.uri),i=await r.doComplete(e.uri.toString(),t);return{incomplete:!0,suggestions:i.map(u)}}catch(e){return console.error("Error fetching completion items",e),{suggestions:[]}}}}class h{_worker;constructor(e){this._worker=e,this._worker=e}async provideDocumentFormattingEdits(e,t,r){let i=await this._worker(e.uri),o=await i.doFormat(e.uri.toString());return o?[{range:e.getFullModelRange(),text:o}]:[]}}class m{_worker;constructor(e){this._worker=e}async provideHover(e,t,r){let i=e.uri,o=await this._worker(e.uri),s=await o.doHover(i.toString(),t);return s?{range:s.range,contents:[{value:s.content}]}:{contents:[]}}dispose(){}}function p(e){let t=[],r=[],o=new s(e);t.push(o);let n=(...e)=>{try{return o.getLanguageServiceWorker(...e)}catch{throw Error("Error fetching graphql language service worker")}};function a(){let{modeConfiguration:t,languageId:o}=e;t.documentFormattingEdits&&r.push(i.languages.registerDocumentFormattingEditProvider(o,new h(n)))}function c(t){let{modeConfiguration:o,languageId:s}=e;f(r),o.completionItems&&r.push(i.languages.registerCompletionItemProvider(s,new g(n))),o.diagnostics&&r.push(new l(t,n)),o.hovers&&r.push(i.languages.registerHoverProvider(s,new m(n))),a()}let{modeConfiguration:d,formattingOptions:u,diagnosticSettings:p,externalFragmentDefinitions:w,schemas:k}=e;return c(e),e.onDidChange(e=>{e.modeConfiguration!==d&&(d=e.modeConfiguration,c(e)),e.formattingOptions!==u&&(u=e.formattingOptions,a()),e.externalFragmentDefinitions!==w&&(w=e.externalFragmentDefinitions,c(e)),e.diagnosticSettings!==p&&(p=e.diagnosticSettings,c(e)),e.schemas!==k&&(k=e.schemas,c(e))}),t.push(_(r)),_(t)}function _(e){return{dispose:()=>f(e)}}function f(e){for(;e.length;)e.pop().dispose()}}}]);