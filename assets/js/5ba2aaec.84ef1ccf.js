"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["84231"],{40225:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>o,toc:()=>c,default:()=>d,metadata:()=>i,assets:()=>a,contentTitle:()=>l});var i=JSON.parse('{"id":"apis/for-buyers/hotel-x-pull-buyers-api/plugins/cheapest-price","title":"Cheapest Price","description":"The Cheapest Price plugin helps you find the best price among all your Suppliers by grouping similar options together.","source":"@site/docs/apis/for-buyers/hotel-x-pull-buyers-api/plugins/cheapest-price.mdx","sourceDirName":"apis/for-buyers/hotel-x-pull-buyers-api/plugins","slug":"/apis/for-buyers/hotel-x-pull-buyers-api/plugins/cheapest-price","permalink":"/docs/apis/for-buyers/hotel-x-pull-buyers-api/plugins/cheapest-price","draft":false,"unlisted":false,"editUrl":"https://github.com/Travelgate/documentation/tree/main/docs/apis/for-buyers/hotel-x-pull-buyers-api/plugins/cheapest-price.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Blacklist","permalink":"/docs/apis/for-buyers/hotel-x-pull-buyers-api/plugins/blacklist"},"next":{"title":"Preference","permalink":"/docs/apis/for-buyers/hotel-x-pull-buyers-api/plugins/preference"}}'),s=r(85893),t=r(50065);let o={sidebar_position:4},l="Cheapest Price",a={},c=[{value:"Important considerations",id:"important-considerations",level:3},{value:"1. Execute Cheapest Price Plugin in your Query",id:"1-execute-cheapest-price-plugin-in-your-query",level:2},{value:"Special Aggregation Key: eqRates",id:"special-aggregation-key-eqrates",level:3}];function p(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components},{BrowserWindow:i}=n;return i||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("BrowserWindow",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cheapest-price",children:"Cheapest Price"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Cheapest Price"})," plugin helps you find the ",(0,s.jsx)(n.strong,{children:"best price"})," among all your Suppliers by grouping similar options together."]}),"\n",(0,s.jsx)(n.p,{children:"You can decide how to group the options\u2014for example:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Return ",(0,s.jsx)(n.strong,{children:"only the cheapest option"})," for a specific meal plan."]}),"\n",(0,s.jsxs)(n.li,{children:["Return ",(0,s.jsx)(n.strong,{children:"only the cheapest option"})," for each hotel and room type."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This way, you always get the best price based on your selected criteria!"}),"\n",(0,s.jsx)(n.h3,{id:"important-considerations",children:"Important considerations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"If you use Hotel-X in multimode"})," (multiple suppliers at once), make sure to ",(0,s.jsx)(n.strong,{children:"map hotel codes and other entities"}),". This allows us to group and compare options correctly."]}),"\n",(0,s.jsxs)(n.li,{children:["If you need a ",(0,s.jsx)(n.strong,{children:"more advanced aggregation plugin"}),", which lets you compare options from different suppliers and set preference rules for specific suppliers, you can use the ",(0,s.jsx)(n.a,{href:"/docs/apis/for-buyers/hotel-x-pull-buyers-api/plugins/preference",children:(0,s.jsx)(n.strong,{children:"Preference Plugin"})})," instead."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["You don't need to create any files for this plugin. Just specify it in the ",(0,s.jsx)(n.code,{children:"settings"})," > ",(0,s.jsx)(n.code,{children:"plugins"})," field in your search query."]})}),"\n",(0,s.jsx)(n.h2,{id:"1-execute-cheapest-price-plugin-in-your-query",children:"1. Execute Cheapest Price Plugin in your Query"}),"\n",(0,s.jsxs)(n.p,{children:["To use the plugin add the following field to the ",(0,s.jsx)(n.code,{children:"settings"})," node of your request. Note that cheapest price plugin can just be executed in search query. In order to successfully execute the cheapest price plugin, you will need to create the request with the following variables."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"step"})}),': "RESPONSE"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"type"})}),': "PRE_STEP"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"name"})}),': "cheapest_price"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"parameters"})}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"primaryKey"})}),': Criteria used to aggregate and create groups to compare options, separated by commas. For example: "hotel, supplier, board". Possible values are:']}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"hotel"}),"\n",(0,s.jsx)(n.li,{children:"supplier"}),"\n",(0,s.jsx)(n.li,{children:"board"}),"\n",(0,s.jsx)(n.li,{children:"binding"}),"\n",(0,s.jsx)(n.li,{children:"cancelPolicy"}),"\n",(0,s.jsx)(n.li,{children:"currency"}),"\n",(0,s.jsx)(n.li,{children:"market"}),"\n",(0,s.jsx)(n.li,{children:"payment"}),"\n",(0,s.jsx)(n.li,{children:"promotion"}),"\n",(0,s.jsx)(n.li,{children:"rateRules"}),"\n",(0,s.jsx)(n.li,{children:"refundable"}),"\n",(0,s.jsx)(n.li,{children:"room"}),"\n",(0,s.jsx)(n.li,{children:"supplement"}),"\n",(0,s.jsx)(n.li,{children:"surcharges"}),"\n",(0,s.jsx)(n.li,{children:"ratePlan"}),"\n",(0,s.jsx)(n.li,{children:"status"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"optionsPerKey"})}),": Limits the number of options per aggregation group, this being defined by the previous primakyKey parameter. Value: Integer. By default it is 1, so it returns only the cheapest option."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"internalCurrencyConversion"})}),": Enables internal currency conversion for aggregation. Value: ",(0,s.jsx)(n.code,{children:"true"})," or ",(0,s.jsx)(n.code,{children:"false"}),". By default, aggregation considers the ",(0,s.jsx)(n.strong,{children:"currency"}),", meaning that only options sharing the same currency are grouped together. If you receive responses from multiple suppliers using different currencies but want to internally compare them, you can enable this option.  When set to ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"true"})}),", Travelgate will apply an internal currency conversion (updated every day) to allow aggregation and comparison of options within the same ",(0,s.jsx)(n.code,{children:"primaryKey"})," group, even if they have different currencies. This conversion is only used for aggregation purposes\u2014",(0,s.jsx)(n.strong,{children:"the final response will always return prices in their original currency"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Remember",type:"caution",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"primaryKey"})," is a mandatory parameter in order to activate the plugin. ",(0,s.jsx)(n.code,{children:"optionsPerKey"})," and ",(0,s.jsx)(n.code,{children:"internalCurrencyConversion"})," are optional and complementary of the first."]})}),"\n",(0,s.jsx)(n.p,{children:"For instance, if you want to find the most affordable option for each hotel, supplier, and room:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'"settings": {\n    "plugins" : [\n        {\n            "step" : "RESPONSE",\n            "pluginsType" : [\n                {\n                    "type" : "PRE_STEP",\n                    "name" : "cheapest_price",\n                    "parameters" : [\n                        {\n                            "key" : "primaryKey",\n                            "value" : "hotel,supplier,room"\n                        },\n                        {\n                            "key" : "optionsPerKey",\n                            "value" : "1"\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"special-aggregation-key-eqrates",children:"Special Aggregation Key: eqRates"}),"\n",(0,s.jsx)(n.p,{children:'There is a special value for the aggregation key "eqRates" that  will combine the rateRules and ratePlans of an option and group all of the options, based on the file uploaded in the SFTP with the name:'}),"\n",(0,s.jsx)(i,{children:(0,s.jsxs)(n.p,{children:["\u{1F4C1}HotelX",(0,s.jsx)(n.br,{}),"\n","\xa0\xa0\xa0\xa0 \u{1F4C1}HotelX_0000",(0,s.jsx)(n.br,{}),"\n","\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \u{1F4C1}BusinessRules",(0,s.jsx)(n.br,{}),"\n","\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 ",(0,s.jsxs)(n.strong,{children:["\u{1F4C4}",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(45900).Z+"",children:"SupplierContext_rateplanraterule.csv"})]})]})}),"\n",(0,s.jsx)(n.p,{children:'With this uploaded CSV file, all the options with the ratePlan code "NOREEMBOLSABLE" and no rateRules will be compared with each other. Similarly, all the options without a ratePlan code or without a mapped ratePlan and with rateRules set to "NON_REFUNDABLE" will also be compared with each other.'})]})}function d(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},45900:function(e,n,r){r.d(n,{Z:()=>i});let i=r.p+"assets/files/SupplierContext_rateplanraterule-abb51998d01ba59f8931162b78dccf03.csv"},50065:function(e,n,r){r.d(n,{Z:()=>l,a:()=>o});var i=r(67294);let s={},t=i.createContext(s);function o(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);