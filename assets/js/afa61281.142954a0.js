"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["50862"],{57867:function(e,r,s){s.r(r),s.d(r,{frontMatter:()=>o,toc:()=>c,default:()=>h,metadata:()=>n,assets:()=>d,contentTitle:()=>l});var n=JSON.parse('{"id":"apis/for-sellers/connectors-pull-developers-api/Connector_Framework/Error_Handling_in_Connectors","title":"Error Handling","description":"This section outlines the error handling mechanism in Connectors, focusing on the use of AdviseMessage to represent errors, warnings, and informational messages. It describes the available error codes, helper methods for generating errors, and best practices for implementing error handling in your Connector.","source":"@site/docs/apis/for-sellers/connectors-pull-developers-api/Connector_Framework/Error_Handling_in_Connectors.mdx","sourceDirName":"apis/for-sellers/connectors-pull-developers-api/Connector_Framework","slug":"/apis/for-sellers/connectors-pull-developers-api/Connector_Framework/Error_Handling_in_Connectors","permalink":"/docs/apis/for-sellers/connectors-pull-developers-api/Connector_Framework/Error_Handling_in_Connectors","draft":false,"unlisted":false,"editUrl":"https://github.com/Travelgate/documentation/tree/main/docs/apis/for-sellers/connectors-pull-developers-api/Connector_Framework/Error_Handling_in_Connectors.mdx","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"title":"Error Handling","sidebar_position":8},"sidebar":"docsSidebar","previous":{"title":"Running Integration Tests","permalink":"/docs/apis/for-sellers/connectors-pull-developers-api/Connector_Framework/Running_Integration_Tests"},"next":{"title":"FormTest","permalink":"/docs/apis/for-sellers/connectors-pull-developers-api/Tools_and_Helpers/FormTest_Documentation"}}'),i=s(85893),t=s(50065);let o={title:"Error Handling",sidebar_position:8},l="Connectors Error Handling",d={},c=[{value:"<strong>AdviseMessage Overview</strong>",id:"advisemessage-overview",level:2},{value:"<strong>Example of an AdviseMessage</strong>",id:"example-of-an-advisemessage",level:3},{value:"<strong>Error Codes</strong>",id:"error-codes",level:2},{value:"<strong>Supplier Errors</strong>",id:"supplier-errors",level:3},{value:"<strong>Connector Errors (Internal)</strong>",id:"connector-errors-internal",level:3},{value:"<strong>Booking and Quote Errors</strong>",id:"booking-and-quote-errors",level:3},{value:"<strong>Warnings</strong>",id:"warnings",level:3},{value:"<strong>Using the <code>External</code> Class for Error Details</strong>",id:"using-the-external-class-for-error-details",level:2},{value:"<strong><code>External</code> Class Definition</strong>",id:"external-class-definition",level:3},{value:"<strong>Example: Adding External Details to Errors</strong>",id:"example-adding-external-details-to-errors",level:3},{value:"<strong>Helper Methods</strong>",id:"helper-methods",level:2},{value:"<strong>Supplier Error Helpers</strong>",id:"supplier-error-helpers",level:3},{value:"<strong>Implementation Best Practices</strong>",id:"implementation-best-practices",level:2},{value:"<strong>Example Implementation</strong>",id:"example-implementation",level:2}];function a(e){let r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"connectors-error-handling",children:(0,i.jsx)(r.strong,{children:"Connectors Error Handling"})})}),"\n",(0,i.jsxs)(r.p,{children:["This section outlines the error handling mechanism in Connectors, focusing on the use of ",(0,i.jsx)(r.code,{children:"AdviseMessage"})," to represent errors, warnings, and informational messages. It describes the available error codes, helper methods for generating errors, and best practices for implementing error handling in your Connector."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"advisemessage-overview",children:(0,i.jsx)(r.strong,{children:"AdviseMessage Overview"})}),"\n",(0,i.jsxs)(r.p,{children:["An ",(0,i.jsx)(r.code,{children:"AdviseMessage"})," is used to convey information about the outcome of operations in a standardized manner. It consists of the following key properties:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Code"}),": Represents the type of message (error, warning, or informational)."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Level"}),": Indicates the severity of the message (e.g., ",(0,i.jsx)(r.code,{children:"Error"}),", ",(0,i.jsx)(r.code,{children:"Warning"}),", ",(0,i.jsx)(r.code,{children:"Info"}),")."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Description"}),": Provides a human-readable explanation of the message."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"CorrelationId"}),": Associates the message with specific operations or requests."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"External"}),": Includes additional external details, such as supplier-specific error information."]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h3,{id:"example-of-an-advisemessage",children:(0,i.jsx)(r.strong,{children:"Example of an AdviseMessage"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\n  "Code": 11204,\n  "Level": "Warning",\n  "Description": "No results found from the supplier.",\n  "CorrelationId": "12345",\n  "External": {\n    "Code": "",\n    "Message": "Supplier returned empty response for Search criteria.",\n    "HttpStatusCode": 200\n  }\n}\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"error-codes",children:(0,i.jsx)(r.strong,{children:"Error Codes"})}),"\n",(0,i.jsx)(r.h3,{id:"supplier-errors",children:(0,i.jsx)(r.strong,{children:"Supplier Errors"})}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Code"})}),(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Description"})})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11102"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierError"}),": Generic supplier error when no specific type fits."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11207"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierBadRequest"}),": Indicates a malformed request was sent to the supplier."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11204"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierNoResultsFound"}),": No results found for the given criteria (e.g., no availability)."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11205"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierSessionExpired"}),": The supplier's session expired, requiring re-authentication."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11206"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierResponseNotSerializable"}),": The supplier's response could not be deserialized."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11303"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierBookingNotConfirmed"}),": The booking was not confirmed by the supplier."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"31103"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierTooManyRequests"}),": Indicates the supplier returned an HTTP status code for rate limiting."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"31104"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierTimeout"}),": The supplier did not respond within the specified timeout."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"31105"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierConnectionError"}),": Connection error with the supplier, usually due to non-200 status codes."]})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h3,{id:"connector-errors-internal",children:(0,i.jsx)(r.strong,{children:"Connector Errors (Internal)"})}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Code"})}),(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Description"})})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"12207"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"BadRequest"}),": Malformed client request to the Connector."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"22101"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"InternalError"}),": Internal error within the Connector."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"22106"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierResponseMaxSizeExceeded"}),": The supplier's response exceeded the maximum size limit."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"22107"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"MaxOptionsExceeded"}),": More than the allowed number of options were returned (e.g., >20,000)."]})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h3,{id:"booking-and-quote-errors",children:(0,i.jsx)(r.strong,{children:"Booking and Quote Errors"})}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Code"})}),(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Description"})})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11301"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"ItemNotAvailable"}),": The requested option is no longer available (e.g., during Quote)."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11304"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"PriceChanged"}),": The price changed between Quote and book."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11302"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"ItemNotFoundInContent"}),": The requested item (e.g., hotel) was not found in the content database."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11305"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"BookingNotFound"}),": The booking could not be located."]})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h3,{id:"warnings",children:(0,i.jsx)(r.strong,{children:"Warnings"})}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Code"})}),(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Description"})})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"12290"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"InternalWarning"}),": Internal warning within the Connector."]})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"11291"})}),(0,i.jsxs)(r.td,{children:[(0,i.jsx)(r.strong,{children:"SupplierWarning"}),": Supplier-specific warning."]})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"using-the-external-class-for-error-details",children:(0,i.jsxs)(r.strong,{children:["Using the ",(0,i.jsx)(r.code,{children:"External"})," Class for Error Details"]})}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"External"})," class provides additional context about supplier-specific errors. Each ",(0,i.jsx)(r.code,{children:"AdviseMessage"})," can include an ",(0,i.jsx)(r.code,{children:"External"})," object with details such as:"]}),"\n",(0,i.jsx)(r.h3,{id:"external-class-definition",children:(0,i.jsxs)(r.strong,{children:[(0,i.jsx)(r.code,{children:"External"})," Class Definition"]})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-csharp",children:"public class External\n{\n    public string Code { get; init; } // Supplier-specific error code\n    public string Message { get; init; } // Human-readable message from the supplier\n    public int HttpStatusCode { get; init; } // HTTP status code of the supplier's response\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"example-adding-external-details-to-errors",children:(0,i.jsx)(r.strong,{children:"Example: Adding External Details to Errors"})}),"\n",(0,i.jsxs)(r.p,{children:["Here's an example of creating an ",(0,i.jsx)(r.code,{children:"AdviseMessage"})," with ",(0,i.jsx)(r.code,{children:"External"})," details for a supplier timeout error:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-csharp",children:'var externalDetails = new External(\n    code: "ERR-TIMEOUT",\n    message: "The supplier timed out after 30 seconds.",\n    httpStatusCode: 504\n);\n\nvar adviseMessage = AdviseMessage.BuildSupplierTimeout(externalDetails);\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"helper-methods",children:(0,i.jsx)(r.strong,{children:"Helper Methods"})}),"\n",(0,i.jsx)(r.h3,{id:"supplier-error-helpers",children:(0,i.jsx)(r.strong,{children:"Supplier Error Helpers"})}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Method"})}),(0,i.jsx)(r.th,{children:(0,i.jsx)(r.strong,{children:"Description"})})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"BuildSupplierError"})}),(0,i.jsx)(r.td,{children:"Creates a generic supplier error message."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"BuildSupplierBadRequest"})}),(0,i.jsx)(r.td,{children:"Creates a message for bad requests to the supplier."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"BuildSupplierBookingNotConfirmed"})}),(0,i.jsx)(r.td,{children:"Indicates the supplier did not confirm the booking."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"BuildSupplierTimeout"})}),(0,i.jsx)(r.td,{children:"Indicates the supplier timed out during the operation."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"BuildSupplierConnectionError"})}),(0,i.jsx)(r.td,{children:"Creates a message for connection errors with the supplier."})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"BuildSupplierNoResults"})}),(0,i.jsx)(r.td,{children:"Creates a warning message indicating no results were found."})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"implementation-best-practices",children:(0,i.jsx)(r.strong,{children:"Implementation Best Practices"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Use Helper Methods"}),": Always use the provided helper methods to generate ",(0,i.jsx)(r.code,{children:"AdviseMessage"})," instances. This ensures consistency across all Connectors."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Map Supplier Errors"}),": When processing supplier responses, map their error codes or messages to the appropriate ",(0,i.jsx)(r.code,{children:"AdviseMessageCode"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Log Details"}),": Include detailed descriptions and external information in ",(0,i.jsx)(r.code,{children:"AdviseMessage"})," instances to aid debugging."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Validate Responses"}),": Use validation methods like ",(0,i.jsx)(r.code,{children:"TryValidateSupplierResponses"})," to check supplier responses and generate appropriate messages."]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"example-implementation",children:(0,i.jsx)(r.strong,{children:"Example Implementation"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-csharp",children:'public static bool TryValidateSupplierResponses<TRs>(\n    IEnumerable<SupplierResponseWrapper<TRs>> supplierResponses,\n    out IEnumerable<AdviseMessage> adviseMessages) \n    where TRs : BaseResponse\n{\n    var firstResponse = supplierResponses.First();\n\n    if (firstResponse.Response.Error?.Count > 0)\n    {\n        var messages = firstResponse.Response.Error.Select(error =>\n            error.Mensaje == "Sin disponibilidad"\n                ? AdviseMessage.BuildSupplierNoResults(new External("", error.Mensaje, 200))\n                : AdviseMessage.BuildSupplierError(new External("", error.Mensaje, 500))\n        ).ToList();\n\n        adviseMessages = messages;\n        return false;\n    }\n\n    adviseMessages = null;\n    return true;\n}\n'})})]})}function h(e={}){let{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},50065:function(e,r,s){s.d(r,{Z:()=>l,a:()=>o});var n=s(67294);let i={},t=n.createContext(i);function o(e){let r=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);